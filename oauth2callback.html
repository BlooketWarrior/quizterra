<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Processing login...</title>
</head>
<body>
<h1>Processing login...</h1>
<script>
  const params = new URLSearchParams(window.location.search);
  const credential = params.get("credential");

  if (credential) {
    // Decode JWT to get user info
    const user = JSON.parse(atob(credential.split(".")[1]));
    console.log("User info:", user);

    // Store user info in localStorage
    localStorage.setItem("quizterraUser", JSON.stringify({
      name: user.name,
      email: user.email,
      picture: user.picture
    }));

    // Automatically go to stats.html
    window.location.href = "stats.html";
  } else {
    alert("Login failed!");
    window.location.href = "signup.html";
  }
</script>
</body>
</html>
